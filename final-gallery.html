<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Elixir Gallery</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<style>
  @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap');

  :root{
    --gap: 22px;
    --radius: 16px;
    --ink: #0f172a;
    --muted: #64748b;
    --accent: #6c5ce7;
  }

  *{ box-sizing: border-box; }
  body{
    margin:0;
    font-family:'Montserrat', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
    color: var(--ink);
    background: #f7f7f8;
    overflow-x:hidden;
  }

  /* HERO with layered parallax */
  .hero{
    position: relative;
    height: 100svh;
    overflow: hidden;
    display:grid;
    place-items:center;
    text-align:center;
    background: linear-gradient(180deg,#eef2ff 0%, #f7f7f8 100%);
    isolation:isolate;
  }
  .layer{
    position:absolute; inset:0;
    background-position:center;
    background-size:cover;
    will-change: transform;
    pointer-events:none;
  }
  .layer.bg{
    background-image: url('https://images.unsplash.com/photo-1501785888041-af3ef285b470?q=80&w=1600');
    filter: saturate(0.9) contrast(1.05);
  }
  .layer.mg{
    background-image: url('https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?q=80&w=1600');
    mix-blend-mode: multiply; opacity:.9;
  }
  .layer.fg{
    background-image: url('https://images.unsplash.com/photo-1512218168358-85bce3b0b7f0?q=80&w=1600');
    opacity:.85;
  }
  .hero h1{
    position: relative;
    z-index:1;
    font-size: clamp(2.3rem, 3.5vw + 1rem, 3.8rem);
    line-height:1.1;
    margin:0 16px;
  }
  .hero p{
    position: relative;
    z-index:1;
    color: var(--muted);
    max-width: 700px;
    margin: 12px auto 0;
    padding: 0 16px;
  }
  .scroll-cue{
    position:absolute; bottom:20px; left:50%; translate:-50% 0;
    z-index:1; color:#111; opacity:.7; font-size:.95rem;
  }

  /* Chapter wrapper */
  .chapter{
    max-width: 1200px;
    margin: 0 auto;
    padding: 80px 20px;
  }
  .chapter h2{
    font-size: clamp(1.6rem, 1.3vw + 1rem, 2.2rem);
    margin:0 0 14px;
  }
  .chapter p{
    color: var(--muted);
    margin:0 0 24px;
    max-width: 720px;
  }

  /* Vertical parallax content blocks */
  .parallax-block{
    position: relative;
    min-height: 70svh;
    border-radius: 16px;
    overflow: hidden;
    margin: 40px 0;
    background: #fff;
    box-shadow: 0 12px 30px rgb(0 0 0 / .10);
  }
  .pb-bg, .pb-fg{
    position:absolute; inset:0;
    background-position:center;
    background-size:cover;
    will-change: transform;
  }
  .pb-bg{ filter: brightness(.9) contrast(1.05); }
  .pb-fg{ mix-blend-mode:multiply; opacity:.85; }
  .pb-content{
    position: relative; z-index:1;
    padding: 30px;
    color:#fff;
    text-shadow: 0 2px 12px rgb(0 0 0 / .6);
    display:flex; align-items:flex-end; height:100%;
  }

  /* Horizontal scroller (pinned) */
  .hscroll-wrap{
    position: relative;
    width: 100%;
    height: 100svh;
    overflow: hidden;
    background: radial-gradient(1200px 600px at 10% -10%, #eef2ff 0%, transparent 60%), #f7f7f8;
  }
  .hscroll{
    display: flex;
    gap: 24px;
    padding: 60px;
    height: 100%;
    align-items: center;
  }
  .slide{
    flex: 0 0 min(72vw, 900px);
    height: min(70svh, 620px);
    background:#fff;
    border-radius: 16px;
    box-shadow: 0 12px 30px rgb(0 0 0 / .10);
    overflow: hidden;
    position: relative;
    transform: translateZ(0);
  }
  .slide img{
    width:100%; height:100%; object-fit: cover;
    transform-origin:center;
    will-change: transform;
  }
  .slide .label{
    position:absolute; left:16px; bottom:16px;
    background: rgb(0 0 0 / .45);
    color:#fff; font-weight:700; padding: 10px 14px; border-radius: 10px;
    backdrop-filter: blur(6px);
  }

  /* Masonry gallery (from previous) */
  .gallery{
    max-width: 1300px; margin: 0 auto 120px; padding: 0 20px;
  }
  .masonry{
    column-count: 4; column-gap: var(--gap);
  }
  @media (max-width: 1200px){ .masonry{ column-count: 3; } }
  @media (max-width: 900px){ .masonry{ column-count: 2; } }
  @media (max-width: 560px){ .masonry{ column-count: 1; } }
  .card{
    break-inside: avoid; -webkit-column-break-inside: avoid;
    background:#fff; border-radius: var(--radius); margin: 0 0 var(--gap);
    box-shadow: 0 12px 24px rgb(0 0 0 / .10);
    overflow:hidden; position:relative; cursor:pointer;
    opacity:0; transform: translateY(24px); filter: blur(6px);
    transition: box-shadow .25s ease;
  }
  .card:hover{ box-shadow: 0 20px 40px rgb(0 0 0 / .18); }
  .media{ width:100%; height:auto; object-fit:cover; will-change:transform; transition: transform .6s ease; }
  .card:hover .media{ transform: scale(1.04); }
  .caption{
    position:absolute; left:12px; right:12px; bottom:12px;
    padding: 10px 14px; border-radius:10px; background:rgb(0 0 0 / .46);
    color:#fff; font-weight:600; opacity:0; transform: translateY(6px); transition: .25s ease;
    backdrop-filter: blur(6px);
  }
  .card:hover .caption{ opacity:1; transform: translateY(0); }

  @supports (grid-template-rows: masonry){
    .masonry{ column-count: initial; display:grid; grid-template-columns: repeat(auto-fill, minmax(280px,1fr)); grid-template-rows:masonry; gap: var(--gap); }
    .card{ margin:0; }
  }

  /* Lightbox */
  .lightbox{ position: fixed; inset: 0; display: none; align-items:center; justify-content:center; background: rgb(3 6 23 / .92); z-index: 1000; padding: 24px; }
  .lightbox.active{ display:flex; }
  .lightbox-img{ max-width:92vw; max-height:90vh; border-radius:16px; object-fit:contain; background:#111; box-shadow: 0 24px 60px rgb(0 0 0 / .6); }
  .close{ position: fixed; top:20px; right:24px; color:#fff; font-size:2.6rem; cursor:pointer; }
</style>
</head>
<body>

  <!-- HERO -->
  <section class="hero" id="hero">
    <div class="layer bg" data-speed="0.2" aria-hidden="true"></div>
    <div class="layer mg" data-speed="0.4" aria-hidden="true"></div>
    <div class="layer fg" data-speed="0.65" aria-hidden="true"></div>
    <div class="hero-copy">
      <h1>Welcome to Our Elixir Family!</h1>
      <p>A glimpse into the vibrant and enriching life at Academic Elixir.</p>
    </div>
    <div class="scroll-cue">Scroll</div>
  </section>

  <!-- Chapter: Vertical parallax blocks -->
  <section class="chapter">
    <h2>Chapter One: Depth</h2>
    <p>Foreground and background layers move at different speeds as the page scrolls, creating cinematic depth that feels tangible and alive.</p>

    <div class="parallax-block">
      <div class="pb-bg" style="background-image:url('https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=1600');"></div>
      <div class="pb-fg" style="background-image:url('https://images.unsplash.com/photo-1469474968028-56623f02e42e?w=1600');"></div>
      <div class="pb-content">
        <h3>Oceans in Motion</h3>
      </div>
    </div>

    <div class="parallax-block">
      <div class="pb-bg" style="background-image:url('https://images.unsplash.com/photo-1501785888041-af3ef285b470?w=1600');"></div>
      <div class="pb-fg" style="background-image:url('https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?w=1600');"></div>
      <div class="pb-content">
        <h3>Peaks and Valleys</h3>
      </div>
    </div>
  </section>

  <!-- Chapter: Horizontal pinned scroller -->
  <section class="hscroll-wrap" id="hwrap">
    <div class="hscroll" id="hscroll">
      <article class="slide">
        <img src="https://images.unsplash.com/photo-1518173946687-a4c8892bbd9f?w=1600" alt="Urban Dreams" />
        <span class="label">Urban Dreams</span>
      </article>
      <article class="slide">
        <img src="https://images.unsplash.com/photo-1470770903676-69b98201ea1c?w=1600" alt="Desert Wanderlust" />
        <span class="label">Desert Wanderlust</span>
      </article>
      <article class="slide">
        <img src="https://images.unsplash.com/photo-1472214103451-9374bd1c798e?w=1600" alt="Mirror Lake" />
        <span class="label">Mirror Lake</span>
      </article>
      <article class="slide">
        <img src="https://images.unsplash.com/photo-1501594907352-04cda38ebc29?w=1600" alt="Autumn Colors" />
        <span class="label">Autumn Colors</span>
      </article>
      <article class="slide">
        <img src="https://images.unsplash.com/photo-1482938289607-e9573fc25ebb?w=1600" alt="Winter Wonderland" />
        <span class="label">Winter Wonderland</span>
      </article>
    </div>
  </section>

  <!-- Chapter: Masonry gallery -->
  <section class="chapter">
    <h2>Chapter Three: Collection</h2>
    <p>A fluid masonry grid supports mixed aspect ratios while scroll reveals and a lightbox keep the experience immersive.</p>
  </section>
  <main class="gallery">
    <section class="masonry" id="masonry">
      <!-- Repeat a mix of sizes -->
      <figure class="card">
        <img class="media" src="https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=1400" alt="Mountain Peak" loading="lazy" />
        <figcaption class="caption">Mountain Peak</figcaption>
      </figure>
      <figure class="card">
        <img class="media" src="https://images.unsplash.com/photo-1469474968028-56623f02e42e?w=1200" alt="Forest Trail" loading="lazy" />
        <figcaption class="caption">Forest Trail</figcaption>
      </figure>
      <figure class="card">
        <img class="media" src="https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=1100" alt="Tropical Paradise" loading="lazy" />
        <figcaption class="caption">Tropical Paradise</figcaption>
      </figure>
      <figure class="card">
        <img class="media" src="https://images.unsplash.com/photo-1518173946687-a4c8892bbd9f?w=900" alt="Urban Dreams" loading="lazy" />
        <figcaption class="caption">Urban Dreams</figcaption>
      </figure>
      <figure class="card">
        <img class="media" src="https://images.unsplash.com/photo-1470770903676-69b98201ea1c?w=1000" alt="Desert Wanderlust" loading="lazy" />
        <figcaption class="caption">Desert Wanderlust</figcaption>
      </figure>
      <figure class="card">
        <img class="media" src="https://images.unsplash.com/photo-1472214103451-9374bd1c798e?w=1500" alt="Mirror Lake" loading="lazy" />
        <figcaption class="caption">Mirror Lake</figcaption>
      </figure>
      <figure class="card">
        <img class="media" src="https://images.unsplash.com/photo-1501594907352-04cda38ebc29?w=1200" alt="Autumn Colors" loading="lazy" />
        <figcaption class="caption">Autumn Colors</figcaption>
      </figure>
      <figure class="card">
        <img class="media" src="https://images.unsplash.com/photo-1482938289607-e9573fc25ebb?w=900" alt="Winter Wonderland" loading="lazy" />
        <figcaption class="caption">Winter Wonderland</figcaption>
      </figure>
      <figure class="card">
        <img class="media" src="https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=1400" alt="Emerald Valley" loading="lazy" />
        <figcaption class="caption">Emerald Valley</figcaption>
      </figure>
    </section>
  </main>

  <!-- Lightbox -->
  <div class="lightbox" id="lightbox">
    <span class="close" id="closeBtn" aria-label="Close">&times;</span>
    <img class="lightbox-img" id="lightboxImg" alt="Full view" />
  </div>

  <!-- Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>

  <script>
    gsap.registerPlugin(ScrollTrigger);

    // Anime.js hero copy intro
    anime.timeline({ easing:'easeOutQuad' })
      .add({ targets: '.hero h1', opacity: [0,1], translateY: [24,0], duration: 700 })
      .add({ targets: '.hero p', opacity: [0,1], translateY: [16,0], duration: 600 }, '-=300');

    // HERO layered parallax (vertical + slight horizontal)
    gsap.utils.toArray('.hero .layer').forEach(layer => {
      const speed = parseFloat(layer.dataset.speed || 0.3);
      gsap.to(layer, {
        y: () => ScrollTrigger.maxScroll(window) * speed * 0.08,
        x: (i, el) => i === 2 ? 30 : -15, // subtle lateral drift
        ease: 'none',
        scrollTrigger: { trigger: '.hero', start: 'top top', end: 'bottom top', scrub: true }
      });
    });

    // Vertical parallax blocks
    document.querySelectorAll('.parallax-block').forEach(block => {
      const bg = block.querySelector('.pb-bg');
      const fg = block.querySelector('.pb-fg');

      gsap.fromTo(bg, { y: -40 }, {
        y: 40, ease:'none',
        scrollTrigger:{ trigger:block, start:'top bottom', end:'bottom top', scrub:true }
      });

      gsap.fromTo(fg, { y: 30 }, {
        y: -30, ease:'none',
        scrollTrigger:{ trigger:block, start:'top bottom', end:'bottom top', scrub:true }
      });
    });

    // Horizontal pinned scroll
    const hwrap = document.getElementById('hwrap');
    const hscroll = document.getElementById('hscroll');
    const slides = gsap.utils.toArray('.slide');
    const totalWidth = () => slides.reduce((w, s) => w + s.getBoundingClientRect().width + 24, 0);
    const maxX = () => Math.max(0, totalWidth() - window.innerWidth);

    const horiz = gsap.to(hscroll, {
      x: () => -maxX(),
      ease: 'none',
      scrollTrigger: {
        trigger: hwrap,
        start: 'top top',
        end: () => `+=${maxX()}`,
        scrub: true,
        pin: true,
        anticipatePin: 1
      }
    });

    // Add subtle depth on slides while scrolling horizontally
    slides.forEach((slide, i) => {
      const img = slide.querySelector('img');
      gsap.to(img, {
        scale: 1.06,
        ease: 'none',
        scrollTrigger: { containerAnimation: horiz, trigger: slide, start: 'left right', end: 'right left', scrub: true }
      });
    });

    // Reveal cards in gallery on scroll
    gsap.utils.toArray('.card').forEach((card) => {
      gsap.fromTo(card, { opacity:0, y:24, filter:'blur(6px)' }, {
        opacity:1, y:0, filter:'blur(0px)', duration:.8, ease:'power2.out',
        scrollTrigger:{ trigger: card, start:'top 90%', toggleActions:'play none none reverse' }
      });
    });

    // Lightbox
    const cards = document.querySelectorAll('.card');
    const lightbox = document.getElementById('lightbox');
    const lightboxImg = document.getElementById('lightboxImg');
    const closeBtn = document.getElementById('closeBtn');

    cards.forEach(card => {
      card.addEventListener('click', () => {
        const img = card.querySelector('.media');
        lightboxImg.src = img.currentSrc || img.src;
        lightbox.classList.add('active');
        gsap.fromTo('.lightbox-img', { opacity:0, scale:.96 }, { opacity:1, scale:1, duration:.35, ease:'power2.out' });
      });
    });

    const close = () => {
      gsap.to('.lightbox-img', { opacity:0, scale:.96, duration:.25, ease:'power2.in', onComplete: () => {
        lightbox.classList.remove('active'); lightboxImg.src = '';
      }});
    };
    closeBtn.addEventListener('click', close);
    lightbox.addEventListener('click', e => { if (e.target === lightbox || e.target === lightboxImg) close(); });
    document.addEventListener('keydown', e => { if (e.key === 'Escape') close(); });

    // Ensure correct measurements after images load/resizes
    const refresh = () => { ScrollTrigger.refresh(); };
    window.addEventListener('load', refresh);
    window.addEventListener('resize', () => { ScrollTrigger.refresh(); });
  </script>
</body>
</html>
